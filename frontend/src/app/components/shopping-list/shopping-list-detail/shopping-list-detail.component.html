<div class="tw-pt-4 tw-flex tw-items-center tw-justify-between">
  <h1>{{ shoppingListDetailDto?.name }}</h1>
  <div class="tw-flex tw-gap-4 tw-items-center">
    <div>
      <a class="btn btn-secondary" [routerLink]="['edit']">
        <i class="bi bi-pencil"></i>
        Edit
      </a>
    </div>
    <div>
      <a aria-label="Delete shopping list"
         class="btn btn-danger responsive-danger-button m-1"
         data-bs-target="#deleteShoppingList #confirm-delete-dialog-title"
         data-bs-toggle="modal">
        <i class="bi bi-trash"></i>
        Delete
      </a>
    </div>
  </div>
</div>
<div *ngIf="shoppingListDetailDto?.categories.length > 0" class="tw-flex tw-gap-2 tw-items-center">
  <h3 class="tw-pr-2">Categories</h3>
  <div class="tw-bg-amber-100 tw-px-2 tw-rounded-xl tw-outline-1 tw-outline tw-outline-amber-400"
       *ngFor="let category of shoppingListDetailDto?.categories">
    <div class="">
      {{ category }}
    </div>
  </div>
</div>
<div *ngIf="shoppingListDetailDto?.group" class="tw-flex tw-items-center gap-2">
  <div class="tw-text-xl">Group:</div>
  <a [routerLink]="['/group/', shoppingListDetailDto?.group.id]" class="tw-text-black tw-no-underline">
    <div
      class="tw-outline tw-outline-1 tw-px-2 tw-rounded-xl tw-outline-gray-300 hover:tw-shadow-xl">{{ shoppingListDetailDto?.group.groupName }}
    </div>
  </a>
</div>
<div class="tw-pt-4">
  <div class="tw-flex tw-items-center tw-justify-between">
    <h2>Items</h2>
    <a aria-label="Delete item"
       class="btn btn-success m-1"
       data-bs-target="#add-shopping-list-item-modal"
       data-bs-toggle="modal">
      Add new item
    </a>
  </div>
  <div class="">
    <div *ngFor="let shoppingListItem of shoppingListDetailDto?.items" class="">
      <div [ngClass]="{'tw-bg-gray-300': !!shoppingListItem.checkedById}"
           class="tw-p-2 tw-m-2 tw-rounded-md tw-outline tw-outline-1 tw-outline-slate-300 tw-flex tw-justify-between tw-items-center tw-hover:bg-slate-100 tw-hover:cursor-pointer">
        <div class="tw-flex tw-gap-4 tw-items-center">
          <input
            class="tw-relative before:tw-absolute tw-size-5 tw-cursor-pointer tw-rounded-md tw-border tw-border-blue-200 transition-all checked:tw-border-gray-900 checked:tw-bg-gray-900 hover:tw-border-amber-300"
            type="checkbox" [ngModel]="!!shoppingListItem.checkedById" (click)="toggleChecked(shoppingListItem.id)">
          <div class="tw-grid tw-grid-cols-2 tw-gap-6">
            <div
              class="tw-text-xl tw-font-medium tw-min-w-60 tw-truncate tw-overflow-hidden">{{ shoppingListItem.item.description }}
            </div>
            <div>{{ shoppingListItem.item.amount }} {{ shoppingListItem.item.unit }}</div>
          </div>
        </div>
        <div class="tw-flex tw-gap-8 tw-items-center">
          <button (click)="addItemToPantry(shoppingListItem.id)" class="btn btn-info">Add to pantry</button>
          <div class="tw-flex">
            <a (click)="selectItem(shoppingListItem)"
               aria-label="Edit item"
               class="btn btn-secondary responsive-info-button m-1"
               data-bs-target="#edit-shopping-list-item-modal"
               data-bs-toggle="modal"
            >
              <i class="bi bi-pencil"></i>
            </a>
            <a (click)="selectItem(shoppingListItem)"
               aria-label="Delete item"
               class="btn btn-danger responsive-danger-button m-1"
               data-bs-target="#deleteItem #confirm-delete-dialog-title"
               data-bs-toggle="modal">
              <i class="bi bi-trash"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-confirm-delete-dialog (confirm)="deleteItem(selectedItem.id)" [deleteWhat]="selectedItem?.item.description"
                           id="deleteItem"></app-confirm-delete-dialog>
<app-confirm-delete-dialog (confirm)="deleteShoppingList()" [deleteWhat]="shoppingListDetailDto?.name"
                           id="deleteShoppingList"></app-confirm-delete-dialog>
<app-add-shopping-list-item-modal (onAdd)="loadShoppingListDetailDto()"
                                  [shoppingListId]="shoppingListDetailDto?.id"></app-add-shopping-list-item-modal>
<app-edit-shopping-list-item-modal (onEdit)="loadShoppingListDetailDto()" [shoppingListId]="shoppingListDetailDto?.id"
                                   [shoppingListItem]="selectedItem"></app-edit-shopping-list-item-modal>

